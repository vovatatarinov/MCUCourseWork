# stm32f429workspace

Рабочее пространство среды IAR для работы с микроконтроллером STM32F429 с использованием библиотек CMSIS и HAL LL.

Данное рабочее пространство содержит библиотеки, шаблонны проектов и скрипты, которые позволяют быстро создать проекты IAR с подключенными библиотеками и настройками, необходимыми для работы с STM32F429.

## Структура

* **Drivers** – исходные коды библиотек CMSIS и HAL LL.
* **Projects** – папка, в которую будут добавляться проекты (каждый проект в своей папке).
* **settings** – настройки рабочего пространства IAR
* **Templates** – шаблоны проектов
* **Utils** – директория с различными утилитыми. Подробности смотреть в README.md в папке
* **MakeNewCMSISProject.bat** – скрпит для создания нового проекта, использующего библиотеку CMSIS.
* **MakeNewLLProject.bat** – скрпит для создания нового проекта, использующего библиотеки HAL LL CMSIS.
* **SetUtilsPath.*** –  скрипты для добавления в *PATH* нужных директорий для удобной работы с утилитами.

## Использование

Достаточно в терминале запустить команду в нужной дериктории

`$ git clone https://github.com/vovatatarinov/IARWorkspace.git`

Если необходим шаблон рабочего пространства, то необходимо смотреть ветку `Template` или у автора данного шаблона на gitlab.

https://gitlab.com/mikheev/stm32f429workspace

Перед началом работы c шаблоном нужно сделать форк данного репозитория, а затем клонировать его на локальный ПК.

**Важно!** В пути до папки проекта не должно быть пробелов.

### Создание нового проекта, использующего библиотеку CMSIS

1. Запустить скрипт `MakeNewCMSISProject.bat`.
2. **Задать имя** для нового проекта (имя не должно содержать пробелов) и нажать **Enter**. В папке `Projects` должна появиться новая папка с проектом.
3. Открыть рабочее пространство **STM32F429Workspace.eww** в IAR.
4. Добавить созданный проект в рабочее пространство: `Project` > `Add Existing Project…` Указать путь до `.ewp` файла созданного проекта (`Projects/<ProjectName>/<ProjectName>.ewp`).

### Создание нового проекта, использующего библиотеки HAL LL и CMSIS

1. Запустить скрипт `MakeNewLLProject.bat`.
2. **Задать имя** для нового проекта (имя не должно содержать пробелов) и нажать **Enter**. В папке `Projects` должна появиться новая папка с проектом.
3. Открыть рабочее пространство **STM32F429Workspace.eww** в IAR.
4. Добавить созданный проект в рабочее пространство: `Project` > `Add Existing Project…` Указать путь до `.ewp` файла созданного проекта (`Projects/<ProjectName>/<ProjectName>.ewp`).
5. Из папки `Drivers\STM32F4xx_HAL_Driver\Src` добавить в проект файлы библиотек для тех файлов, которые планируется использовать в данном проекте. Файлы можно добавить простым перетаскиванием в область окна Workspace.

## Дополнительно

В Projects содержатся два демонстрационных проекта:
* **Blinky** – Мигание светодиодом и смена светодиодом при нажатии кнопки. Проект написан с использованием CMSIS.
* **Timer** – Мигание светодиодом таймеру. Проект написан с использованием HAL LL.

**Остальные проекты пронумерованы в соответсвии с номером задания**

